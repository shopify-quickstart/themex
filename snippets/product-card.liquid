{% liquid
  assign product = product | default: empty
  assign class_name = class_name | default: ''
  assign image_width = image_width | default: 500

  unless product != empty
    echo '<!-- Error: product parameter required for product-card snippet -->'
    break
  endunless
%}

<a href="{{ product.url }}" class="group block {{ class_name }}">
  <div class="relative overflow-hidden mb-3">
    {% if product.featured_image %}
      <img
        src="{{ product.featured_image | image_url: width: image_width }}"
        alt="{{ product.featured_image.alt | escape | default: product.title | escape }}"
        class="w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105"
        width="{{ image_width }}"
        height="{{ image_width }}"
        loading="lazy"
      >
    {% else %}
      <div class="w-full aspect-square bg-gray-200 flex items-center justify-center">
        <span class="text-gray-400 text-sm">No image</span>
      </div>
    {% endif %}
  </div>
  <div>
    <h3 class="text-sm md:text-base font-medium mb-2 line-clamp-2 group-hover:underline">
      {{ product.title }}
    </h3>
    <p class="text-sm md:text-base font-semibold">
      {{ product.price | money }}
      {% if product.compare_at_price > product.price %}
        <span class="text-gray-500 line-through ml-2">
          {{ product.compare_at_price | money }}
        </span>
      {% endif %}
    </p>
  </div>
</a>
